# e-shop_API
flask based api, integrated with postgresql databases.

# Для инсталляции проекта на свой компьютер используйте следующие шаги:

1. Локально сохраните репозиторий

```
git clone https://github.com/mkhivchk/e-shop_API
```

2. Откройте проект с помощью pycharm и создайте виртуальное окружение

```
python3 -m venv <имя_окружения>
```

3. Активируйте окружение

```
source <имя_окружения>/bin/activate
```

4. Установите все необходимые пакеты с помощью команды

```
pip install -r requirements.txt
```

5. Разверните базу данных, используя docker

```
docker run -d --name some-postgres -e POSTGRES_PASSWORD=mysecretpassword -p 5433:5432 -d postgres
```

6. С помощью pycharm подключитесь к базе данных используя имя базы данных и юзера: `postgres`, пароль `mysecretpassword` и порт `5433`

8. Для первичного наполнения базы данных пропишите в консоли следующую команду:

```
CREATE TABLE Goods
(
    id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Name VARCHAR(20),
    Price INT
);

INSERT INTO Goods (Name, Price)
VALUES ( 'Iphone 14', 1000);

INSERT INTO Goods (Name, Price)
VALUES ('Samsung galaxy s10', 950);

INSERT INTO Goods (Name, Price)
VALUES ('Xiaomi Redmi Note 10', 558);
```

# В проекте используются следующие эндпоинты
`localhost:5000/api/product all` - Возвращает все значения таблицы "Товары"
`localhost:5000/api/<id>` - Возвращает объект из таблицы по заданному id
`localhost:5000/api/add` -  Позволяет добавить новый товар

Для использования `localhost:5000/api/add` применяется POST запрос для curl следующего содержания:

```
curl --location --request POST 'localhost:5000/api/add' \
--form 'name_add="имя_товара"' \
--form 'price_add=цена_товара"'
```
